<link rel="stylesheet" href="/stylesheets/style.css" />
<script type="text/javascript" src="common.js"></script>
<script type="text/javascript" src="prototypes.js"></script>
<script type="text/javascript" src="player.js"></script>

<!-- gloval variables to keep tracking -->
<input type="hidden" id="previousGenre" />
<input type="hidden" id="currentGenre" />

<h1>Liste musicale</h1>
<div id="mainDiv">
<% if (musicFileList.length == 0) { %>
Pas de musique !
<% } else { %>
	<ul>
		<% genreList.forEach(function(genre) { %>
		<li style="display: inline">
            <span>
                <form style="display:inline;" action="/fromtogenre" method="POST">
                    <input type="hidden" id='trackingGenreTag_<%= genre %>' name='fromto' value='' />
                    <input onclick="filterByGenre('<%= genre %>', 'trackingGenreTag_<%= genre %>', this)" type="submit" value="<%= genre %>" />
                </form>
            </span>
		</li>
		<% }); %>
	</ul> 

	<audio id="audioPlayer" controls></audio>
	<ul id="musicList" >
		<% musicFileList.forEach(function(musicFile) { %>
			<li class="liMusicFile">
				<span style="display:none"><%= musicFile.genre %></span>
				<span><%- musicFile.path %></span>
                <span class="btnPlay">
                    <form style="display:inline;" action="/genre" method="POST">
                        <input type="hidden" name="genre" value='<%= musicFile.genre %>' />
                        <input onclick="play('audioPlayer', '<%= musicFile.path %>')"" type="submit" value="Play" />
                    </form>
                </span>
			</li> 
		<% }); %>
	</ul>
</div>
<% } %>
