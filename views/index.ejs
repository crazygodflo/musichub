<link rel="stylesheet" href="/stylesheets/style.css" />
<script type="text/javascript" src="common.js"></script>
<script type="text/javascript" src="prototypes.js"></script>
<script type="text/javascript" src="player.js"></script>

<!-- gloval variables to keep tracking -->
<input type="hidden" id="previousGenre" />
<input type="hidden" id="currentGenre" />

<h1>Liste musicale</h1>
<div id="mainDiv">
<% if (musicFileList.length == 0) { %>
Pas de musique !
<% } else { %>
	<ul>
		<% genreList.forEach(function(genre) { %>
		<li style="display: inline">
            <span>
                <button id='<%= genre %>' onclick="filterByGenre('<%= genre %>', this)"><%= genre %></button>
            </span>
		</li>
		<% }); %>
	</ul> 

	<audio id="audioPlayer" controls></audio>
	<ul id="musicList" >
		<% musicFileList.forEach(function(musicFile) { %>
			<li class="liMusicFile">
				<span style="display:none"><%= musicFile.genre %></span>
				<span><%- musicFile.path %></span>
                <span><button class="btnPlay" onclick="play('audioPlayer', '<%= musicFile.path %>', '<%= musicFile.genre %>')">Play</button></span>
			</li> 
		<% }); %>
	</ul>
</div>
<% } %>
